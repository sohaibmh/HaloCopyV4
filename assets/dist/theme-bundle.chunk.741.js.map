{"version":3,"file":"theme-bundle.chunk.741.js","mappings":"6QACuD,IAElCA,EAAI,SAAAC,GACrB,SAAAD,EAAYE,GAAS,OACjBD,EAAAE,KAAA,KAAMD,IAAQ,IAClB,C,QAIC,O,EAJAD,G,EAAAD,G,sEAAAA,EAAAI,UAEJC,QAAA,WCRc,IAASH,EAGhBI,EAKMC,EAPJC,EACFC,EAFgBP,EDSFQ,KAAKR,QCRjBM,EAAQN,EAAQM,MAClBC,EAAYE,EAAE,oBAMRJ,EAAW,SAACK,IActB,SAAiBN,GACb,OAAOO,MAAM,WAAY,CACzBC,OAAQ,OACRC,QAAS,CACL,eAAgB,mBAChB,cAAiB,UAAYP,GAEjCQ,KAAMC,KAAKC,UAAU,CACjBC,MAAO,0RAQmCb,EAAG,ioCA2BlDc,MAAK,SAAAC,GAAG,OAAIA,EAAIC,MAAM,IACpBF,MAAK,SAAAC,GAAG,OAAIA,EAAIE,IAAI,GACzB,EAxDQC,CAFAlB,EAAMG,EAAUgB,GAAGb,GAAGc,KAAK,kBAEdN,MAAK,SAAAG,IAqF1B,SAAoBI,EAAOrB,GACvBK,EAAEiB,KAAKD,GAAO,SAACE,EAAOC,GAClB,GAAID,EAAQ,EAAG,CACX,IAGIE,EAHAC,EAAOL,EAAME,GAAOI,KAAKD,KACzBE,EAAMP,EAAME,GAAOI,KAAKE,KAGxBC,EAAU,GACVC,EAAS,GAGTN,EADoC,MAApCJ,EAAME,GAAOI,KAAKK,eACN,0HACoDJ,EAAG,yDACnCP,EAAME,GAAOI,KAAKK,eAAeC,YAAW,UAAUP,EAAI,qFAI9E,0HACoDE,EAAG,sLAC0FF,EAAI,qFAK3H,MAAtCL,EAAME,GAAOI,KAAKO,mBAClBJ,EAAU,mGAAmGT,EAAME,GAAOI,KAAKO,iBAAgB,mBAGnH,MAA5Bb,EAAME,GAAOI,KAAKI,QAAqD,MAAnCV,EAAME,GAAOI,KAAKQ,gBACtDJ,EAAS,6GAA6GV,EAAME,GAAOI,KAAKI,OAAM,QAxDvIK,EAwD4Jf,EAAME,GAAOI,KAAKQ,cAAcE,IAhDzMC,GAPAC,EAAO,IAAIC,KAAKJ,IAOLK,aACXC,EANS,CACX,MAAO,MAAO,MAAO,MAAO,MAAO,MACnC,MAAO,MAAO,MAAO,MAAO,MAAO,OAIlBH,EAAKI,eACpBC,EAAOL,EAAKM,iBAYI,GAAGP,EAVzB,SAA0BA,GACtB,GAAIA,EAAM,GAAKA,EAAM,GAAI,MAAO,KAChC,OAAQA,EAAM,IACV,KAAK,EAAG,MAAO,KACf,KAAK,EAAG,MAAO,KACf,KAAK,EAAG,MAAO,KACf,QAAS,MAAO,KAExB,CAE+BQ,CAAiBR,GAEzB,IAAII,EAAK,IAAIE,EAgC+K,SAG3M,IAAMG,EAAO,iGAAiGxB,EAAK,uGAE7FE,EAAS,mOAG8DG,EAAG,KAAKF,EAAI,kDACnFK,EAAM,yCACND,EAAO,wHACwEF,EAAG,8FAIxGvB,EAAE,mBAAmBL,EAAG,0BAA0BgD,OAAOD,GAErDxB,EAAQ,GAAKF,EAAM4B,SACnB5C,EAAE,mBAAmBL,EAAG,0CAA0CkD,SAClEC,YAAW,WACP9C,EAAE,mBAAmBL,EAAG,gCAAgCoD,SAAS,WACrE,GAAG,KAEX,MACI/C,EAAE,mBAAmBL,EAAG,0CAA0CkD,SAClEC,YAAW,WACP9C,EAAE,mBAAmBL,EAAG,gCAAgCoD,SAAS,WACrE,GAAG,KAnFf,IAAuBhB,EACbG,EAOAD,EACAI,EACAE,CA2EN,GACJ,CA/IYS,CAAWpC,EAAKqC,KAAKC,QAAQC,KAAKnC,MAAMoC,MAAOzD,GAC3CM,EAAE,EAAIH,EAAU8C,SAChB3C,IACAL,EAASK,GAEjB,GACJ,GAZQ,EDIZ,EAACZ,CAAA,CAPoB,CAASgE,EAAAA,E","sources":["webpack://Halo/./assets/js/theme/blog.js","webpack://Halo/./assets/js/theme/halothemes/haloBlogByTag.js"],"sourcesContent":["import PageManager from './page-manager';\nimport haloBlogByTag from './halothemes/haloBlogByTag';\n\nexport default class Blog extends PageManager {\n    constructor(context) {\n        super(context);\n    }\n\n\tonReady() {\n        haloBlogByTag(this.context);\n    }\n}\n","export default function(context) {\n    const token = context.token;\n    var blogblock = $('[data-blog-tag]'),\n        tag;\n\n    function getPosts() {\n        let i = 0;\n\n        const loadBlog = (i) => {\n            tag = blogblock.eq(i).attr('data-blog-tag');\n\n            getBlog(tag).then(data => {\n                renderBlog(data.site.content.blog.posts.edges, tag);\n                if (i+1 < blogblock.length) {\n                    i++;\n                    loadBlog(i);\n                }\n            });\n        }\n        loadBlog(i);\n    }\n\n    function getBlog(tag) {\n        return fetch('/graphql', {\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer ' + token\n        },\n        body: JSON.stringify({\n            query: `\n            query MyQuery {\n                site {\n                    content {\n                        blog {\n                            name\n                            description\n                            path\n                            posts (filters: {tags:[\"`+tag+`\"]}) {\n                                edges {\n                                    node {\n                                        entityId\n                                        name\n                                        tags\n                                        htmlBody\n                                        plainTextSummary (characterLimit: 100)\n                                        author\n                                        path\n                                        thumbnailImage {\n                                            url (width: 100, height: 200)\n                                            urlOriginal\n                                            altText\n                                            isDefault\n                                        }\n                                        publishedDate {\n                                            utc\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        `}),\n    }).then(res => res.json())\n        .then(res => res.data);\n    }\n\n    function formatUTCDate(utcDateString) {\n        const date = new Date(utcDateString);\n    \n        const months = [\n            \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\n            \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"\n        ];\n    \n        const day = date.getUTCDate();\n        const month = months[date.getUTCMonth()];\n        const year = date.getUTCFullYear();\n    \n        function getOrdinalSuffix(day) {\n            if (day > 3 && day < 21) return \"th\";\n            switch (day % 10) {\n                case 1: return \"st\";\n                case 2: return \"nd\";\n                case 3: return \"rd\";\n                default: return \"th\";\n            }\n        }\n    \n        const dayWithSuffix = `${day}${getOrdinalSuffix(day)}`;\n    \n        return `${dayWithSuffix} ${month} ${year}`;\n    }\n    \n    function renderBlog(posts, tag) {\n        $.each(posts, (index, element) => {\n            if (index < 3) {\n                var name = posts[index].node.name,\n                    url = posts[index].node.path;\n\n                let thumbnail = '',\n                    summary = '',\n                    author = '';\n\n                if (posts[index].node.thumbnailImage != null) {\n                    thumbnail = `<div class=\"item-image o-h b-r-32\">\n                                    <a class=\"halo-fadeZoom d-block b-r-32\" href=\"${url}\">\n                                        <img src=\"${posts[index].node.thumbnailImage.urlOriginal}\" alt=\"${name}\">\\\n                                    </a>\n                                </div>`;\n                } else {\n                    thumbnail = `<div class=\"item-image o-h b-r-32\">\n                                    <a class=\"halo-fadeZoom d-block b-r-32\" href=\"${url}\">\n                                        <img src=\"https://cdn11.bigcommerce.com/s-yrxgwbtfrf/stencil/1128bad0-7ffd-013d-26e0-56dd6728db26/img/placeholder-electronic.svg\" alt=\"${name}\">\\\n                                    </a>\n                                </div>`;\n                }\n\n                if (posts[index].node.plainTextSummary != null) {\n                    summary = `<div class=\"summary f-root f-size-small-tb f-size-tiny-mb w-s-normal m-b-16 m-b-12-tb m-b-8-mb\">${posts[index].node.plainTextSummary} &hellip;</div>`;\n                }\n\n                if (posts[index].node.author != null && posts[index].node.publishedDate != null) {\n                    author = `<p class=\"date color-secondary f-root f-size-small-tb f-size-tiny-mb m-b-16 m-b-12-tb m-b-8-mb\">Posted by ${posts[index].node.author} on ${formatUTCDate(posts[index].node.publishedDate.utc)}</p>`;\n                }\n\n                const html = `<div class=\"item bg-white b-r-12 d-flex a-i-center w-100 hover-zoom pos-relative\" data-index=\"${index}\">\n                                <div class=\"content-left\">\n                                    ${thumbnail}\n                                </div>\n                                <div class=\"content-right halo-fadeInUp\">\n                                    <h5 class=\"name pos-relative m-t-0 m-b-16 m-b-12-tb m-b-8-mb\"><a href=\"${url}\">${name}</a></h5>\n                                    ${author}\n                                    ${summary}\n                                    <a class=\"u-u u-p-u color-heading f-root f-size-small-tb f-size-tiny-mb\" href=\"${url}\">Read more</a>\n                                </div>\n                            </div>`\n\n                $(`[data-blog-tag=\"${tag}\"] .halo-block-content`).append(html);\n\n                if (index + 1 == posts.length) {\n                    $(`[data-blog-tag=\"${tag}\"] .halo-block-content .loadingOverlay`).remove();\n                    setTimeout(() => {\n                        $(`[data-blog-tag=\"${tag}\"] .halo-block-content .item`).addClass('animated');\n                    }, 100);\n                }\n            } else {\n                $(`[data-blog-tag=\"${tag}\"] .halo-block-content .loadingOverlay`).remove();\n                setTimeout(() => {\n                    $(`[data-blog-tag=\"${tag}\"] .halo-block-content .item`).addClass('animated');\n                }, 100);\n            }\n        });\n    }\n\n    getPosts()\n}\n"],"names":["Blog","_PageManager","context","call","prototype","onReady","tag","loadBlog","token","blogblock","this","$","i","fetch","method","headers","body","JSON","stringify","query","then","res","json","data","getBlog","eq","attr","posts","each","index","element","thumbnail","name","node","url","path","summary","author","thumbnailImage","urlOriginal","plainTextSummary","publishedDate","utcDateString","utc","day","date","Date","getUTCDate","month","getUTCMonth","year","getUTCFullYear","getOrdinalSuffix","html","append","length","remove","setTimeout","addClass","renderBlog","site","content","blog","edges","PageManager"],"sourceRoot":""}