{"version":3,"file":"theme-bundle.chunk.27.js","mappings":"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","sources":["webpack://Halo/./assets/js/theme/category.js"],"sourcesContent":["import { hooks } from '@bigcommerce/stencil-utils';\nimport CatalogPage from './catalog';\nimport FacetedSearch from './common/faceted-search';\nimport { createTranslationDictionary } from '../theme/common/utils/translations-utils';\nimport haloAddOptionForProduct from './halothemes/haloAddOptionForProduct';\nimport haloProductDisplayMode from './halothemes/haloProductDisplayMode';\nimport haloSidebarToggle from './halothemes/haloSidebarToggle';\n\nexport default class Category extends CatalogPage {\n    constructor(context) {\n        super(context);\n        this.validationDictionary = createTranslationDictionary(context);\n    }\n\n    setLiveRegionAttributes($element, roleType, ariaLiveStatus) {\n        $element.attr({\n            role: roleType,\n            'aria-live': ariaLiveStatus,\n        });\n    }\n\n    makeShopByPriceFilterAccessible() {\n        if (!$('[data-shop-by-price]').length) return;\n\n        if ($('.navList-action').hasClass('is-active')) {\n            $('a.navList-action.is-active').focus();\n        }\n\n        $('a.navList-action').on('click', () => this.setLiveRegionAttributes($('span.price-filter-message'), 'status', 'assertive'));\n    }\n\n    onReady() {\n        this.arrangeFocusOnSortBy();\n\n        $('[data-button-type=\"add-cart\"]').on('click', (e) => this.setLiveRegionAttributes($(e.currentTarget).next(), 'status', 'polite'));\n\n        this.makeShopByPriceFilterAccessible();\n\n        this.initFacetedSearch();\n\n        if (!$('#facetedSearch').length) {\n            // Refresh range view when shop-by-price enabled\n            const urlParams = new URLSearchParams(window.location.search);\n\n            if (urlParams.has('search_query')) {\n                $('.reset-filters').show();\n            }\n\n            $('input[name=\"price_min\"]').attr('value', urlParams.get('price_min'));\n            $('input[name=\"price_max\"]').attr('value', urlParams.get('price_max'));\n        }\n\n        $('a.reset-btn').on('click', () => this.setLiveRegionsAttributes($('span.reset-message'), 'status', 'polite'));\n\n        this.ariaNotifyNoProducts();\n        this.loadOptionForProductCard(this.context);\n        this.showProductsPerPage();\n        haloProductDisplayMode();\n        haloSidebarToggle();\n    }\n\n    ariaNotifyNoProducts() {\n        const $noProductsMessage = $('[data-no-products-notification]');\n        if ($noProductsMessage.length) {\n            $noProductsMessage.focus();\n        }\n    }\n\n    initFacetedSearch() {\n        const {\n            price_min_evaluation: onMinPriceError,\n            price_max_evaluation: onMaxPriceError,\n            price_min_not_entered: minPriceNotEntered,\n            price_max_not_entered: maxPriceNotEntered,\n            price_invalid_value: onInvalidPrice,\n        } = this.validationDictionary;\n        const $productListingContainer = $('#product-listing-container');\n        const $facetedSearchContainer = $('#faceted-search-container');\n        const productsPerPage = this.context.categoryProductsPerPage;\n        const requestOptions = {\n            config: {\n                category: {\n                    shop_by_price: true,\n                    products: {\n                        limit: productsPerPage,\n                    },\n                },\n            },\n            template: {\n                productListing: 'category/product-listing',\n                sidebar: 'category/sidebar',\n            },\n            showMore: 'category/show-more',\n        };\n\n        this.facetedSearch = new FacetedSearch(requestOptions, (content) => {\n            $productListingContainer.html(content.productListing);\n            $facetedSearchContainer.html(content.sidebar);\n\n            $('body').triggerHandler('compareReset');\n\n            if($productListingContainer.find('[data-halo-load=\"animation\"]').length > 0){\n                $('[data-halo-load=\"animation\"]').addClass('animated');\n                haloAddOptionForProduct(this.context, 'product-listing-container');\n            }\n\n            this.showProductsPerPage();\n            haloProductDisplayMode();\n            haloSidebarToggle();\n\n            window.scrollTo({ top: 0, behavior: 'smooth' });\n        }, {\n            validationErrorMessages: {\n                onMinPriceError,\n                onMaxPriceError,\n                minPriceNotEntered,\n                maxPriceNotEntered,\n                onInvalidPrice,\n            },\n        });\n    }\n\n    loadOptionForProductCard(context) {\n        if($('#product-listing-container .product').length > 0){\n            haloAddOptionForProduct(context, 'product-listing-container');\n        }\n\n        if($('#featured-products').length > 0){\n            haloAddOptionForProduct(context, 'featured-products');\n        }\n    }\n    \n    showProductsPerPage() {\n        try {\n            const url = new URL(window.location.href);\n            const limitValue = url.searchParams.get('limit');\n    \n            if (limitValue) {\n                $('.btn-show-products').removeClass('selected');\n                const selectedBtn = $(`.btn-show-products[data-value=\"${limitValue}\"]`);\n                selectedBtn.addClass('selected');\n                selectedBtn.closest('.actionBar-dropdown').find('.dropdown-label').text(selectedBtn.find('span').text());\n            }\n        } catch (e) {}\n    }\n}\n"],"names":["Category","_CatalogPage","context","_this","call","validationDictionary","createTranslationDictionary","_proto","prototype","setLiveRegionAttributes","$element","roleType","ariaLiveStatus","attr","role","makeShopByPriceFilterAccessible","_this2","$","length","hasClass","focus","on","onReady","_this3","this","arrangeFocusOnSortBy","e","currentTarget","next","initFacetedSearch","urlParams","URLSearchParams","window","location","search","has","show","get","setLiveRegionsAttributes","ariaNotifyNoProducts","loadOptionForProductCard","showProductsPerPage","haloProductDisplayMode","haloSidebarToggle","$noProductsMessage","_this4","_this$validationDicti","onMinPriceError","price_min_evaluation","onMaxPriceError","price_max_evaluation","minPriceNotEntered","price_min_not_entered","maxPriceNotEntered","price_max_not_entered","onInvalidPrice","price_invalid_value","$productListingContainer","$facetedSearchContainer","requestOptions","config","category","shop_by_price","products","limit","categoryProductsPerPage","template","productListing","sidebar","showMore","facetedSearch","FacetedSearch","content","html","triggerHandler","find","addClass","haloAddOptionForProduct","scrollTo","top","behavior","validationErrorMessages","limitValue","URL","href","searchParams","removeClass","selectedBtn","closest","text","CatalogPage"],"sourceRoot":""}