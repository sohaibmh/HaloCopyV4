{"version":3,"file":"theme-bundle.chunk.197.js","mappings":"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","sources":["webpack://Halo/./node_modules/lodash/_getHolder.js","webpack://Halo/./node_modules/lodash/_replaceHolders.js","webpack://Halo/./node_modules/lodash/bind.js","webpack://Halo/./assets/js/theme/cart.js","webpack://Halo/./node_modules/lodash/_createWrap.js","webpack://Halo/./node_modules/lodash/_createCtor.js"],"sourcesContent":["/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var baseRest = require('./_baseRest'),\n    createWrap = require('./_createWrap'),\n    getHolder = require('./_getHolder'),\n    replaceHolders = require('./_replaceHolders');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1,\n    WRAP_PARTIAL_FLAG = 32;\n\n/**\n * Creates a function that invokes `func` with the `this` binding of `thisArg`\n * and `partials` prepended to the arguments it receives.\n *\n * The `_.bind.placeholder` value, which defaults to `_` in monolithic builds,\n * may be used as a placeholder for partially applied arguments.\n *\n * **Note:** Unlike native `Function#bind`, this method doesn't set the \"length\"\n * property of bound functions.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to bind.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {...*} [partials] The arguments to be partially applied.\n * @returns {Function} Returns the new bound function.\n * @example\n *\n * function greet(greeting, punctuation) {\n *   return greeting + ' ' + this.user + punctuation;\n * }\n *\n * var object = { 'user': 'fred' };\n *\n * var bound = _.bind(greet, object, 'hi');\n * bound('!');\n * // => 'hi fred!'\n *\n * // Bound with placeholders.\n * var bound = _.bind(greet, object, _, '!');\n * bound('hi');\n * // => 'hi fred!'\n */\nvar bind = baseRest(function(func, thisArg, partials) {\n  var bitmask = WRAP_BIND_FLAG;\n  if (partials.length) {\n    var holders = replaceHolders(partials, getHolder(bind));\n    bitmask |= WRAP_PARTIAL_FLAG;\n  }\n  return createWrap(func, bitmask, thisArg, partials, holders);\n});\n\n// Assign default placeholders.\nbind.placeholder = {};\n\nmodule.exports = bind;\n","import PageManager from './page-manager';\nimport { bind, debounce } from 'lodash';\nimport checkIsGiftCertValid from './common/gift-certificate-validator';\nimport { createTranslationDictionary } from './common/utils/translations-utils';\nimport utils from '@bigcommerce/stencil-utils';\nimport ShippingEstimator from './cart/shipping-estimator';\nimport { defaultModal, showAlertModal, ModalEvents } from './global/modal';\nimport haloQuickEditCart from './halothemes/haloQuickEditCart';\nimport haloCalculateFreeShipping from './halothemes/haloCalculateFreeShipping';\n\nexport default class Cart extends PageManager {\n    onReady() {\n        this.$modal = null;\n        this.$cartPageContent = $('[data-cart]');\n        this.$cartContent = $('[data-cart-content]');\n        this.$cartMessages = $('[data-cart-status]');\n        this.$cartTotals = $('[data-cart-totals]');\n        this.$cartAdditionalCheckoutBtns = $('[data-cart-additional-checkout-buttons]');\n        this.$overlay = $('[data-cart] .loadingOverlay')\n            .hide(); // TODO: temporary until roper pulls in his cart components\n        this.$activeCartItemId = null;\n        this.$activeCartItemBtnAction = null;\n\n        this.setApplePaySupport();\n        this.bindEvents();\n\n        haloCalculateFreeShipping(this.context);\n        if (this.context.themeSettings.halo_QuickEditCart) {\n            haloQuickEditCart(this.context);\n        }\n\n        if ($('body').hasClass('page-type-cart')) {\n            const $cart = $('[data-cart-preview]');\n\n            $cart.on('click', event => {\n                event.preventDefault();\n\n                const cartElement = document.querySelector('[data-cart]');\n                const cartPosition = cartElement.getBoundingClientRect().top + window.pageYOffset;\n\n                window.scrollTo({\n                    top: cartPosition,\n                    behavior: 'smooth'\n                });\n            });\n        }\n    }\n\n    setApplePaySupport() {\n        if (window.ApplePaySession) {\n            this.$cartPageContent.addClass('apple-pay-supported');\n        }\n    }\n\n    cartUpdate($target) {\n        const itemId = $target.data('cartItemid');\n        this.$activeCartItemId = itemId;\n        this.$activeCartItemBtnAction = $target.data('action');\n\n        const $el = $(`#qty-${itemId}`);\n        const oldQty = parseInt($el.val(), 10);\n        const maxQty = parseInt($el.data('quantityMax'), 10);\n        const minQty = parseInt($el.data('quantityMin'), 10);\n        const minError = $el.data('quantityMinError');\n        const maxError = $el.data('quantityMaxError');\n        const newQty = $target.data('action') === 'inc' ? oldQty + 1 : oldQty - 1;\n        // Does not quality for min/max quantity\n        if (newQty < minQty) {\n            return showAlertModal(minError);\n        } else if (maxQty > 0 && newQty > maxQty) {\n            return showAlertModal(maxError);\n        }\n\n        this.$overlay.show();\n\n        utils.api.cart.itemUpdate(itemId, newQty, (err, response) => {\n            this.$overlay.hide();\n\n            if (response.data.status === 'succeed') {\n                // if the quantity is changed \"1\" from \"0\", we have to remove the row.\n                const remove = (newQty === 0);\n\n                this.refreshContent(remove);\n            } else {\n                $el.val(oldQty);\n                showAlertModal(response.data.errors.join('\\n'));\n            }\n        });\n    }\n\n    cartUpdateQtyTextChange($target, preVal = null) {\n        const itemId = $target.data('cartItemid');\n        const $el = $(`#qty-${itemId}`);\n        const maxQty = parseInt($el.data('quantityMax'), 10);\n        const minQty = parseInt($el.data('quantityMin'), 10);\n        const oldQty = preVal !== null ? preVal : minQty;\n        const minError = $el.data('quantityMinError');\n        const maxError = $el.data('quantityMaxError');\n        const newQty = parseInt(Number($el.val()), 10);\n        let invalidEntry;\n\n        // Does not quality for min/max quantity\n        if (!Number.isInteger(newQty)) {\n            invalidEntry = $el.val();\n            $el.val(oldQty);\n            return showAlertModal(this.context.invalidEntryMessage.replace('[ENTRY]', invalidEntry));\n        } else if (newQty < minQty) {\n            $el.val(oldQty);\n            return showAlertModal(minError);\n        } else if (maxQty > 0 && newQty > maxQty) {\n            $el.val(oldQty);\n            return showAlertModal(maxError);\n        }\n\n        this.$overlay.show();\n        utils.api.cart.itemUpdate(itemId, newQty, (err, response) => {\n            this.$overlay.hide();\n\n            if (response.data.status === 'succeed') {\n                // if the quantity is changed \"1\" from \"0\", we have to remove the row.\n                const remove = (newQty === 0);\n\n                this.refreshContent(remove);\n            } else {\n                $el.val(oldQty);\n\n                return showAlertModal(response.data.errors.join('\\n'));\n            }\n        });\n    }\n\n    cartRemoveItem(itemId) {\n        this.$overlay.show();\n        utils.api.cart.itemRemove(itemId, (err, response) => {\n            if (response.data.status === 'succeed') {\n                this.refreshContent(true);\n            } else {\n                this.$overlay.hide();\n                showAlertModal(response.data.errors.join('\\n'));\n            }\n        });\n    }\n\n    refreshContent(remove) {\n        const $cartItemsRows = $('[data-item-row]', this.$cartContent);\n        const $cartPageTitle = $('[data-cart-page-title]');\n        const options = {\n            template: {\n                content: 'cart/content',\n                totals: 'cart/totals',\n                pageTitle: 'cart/page-title',\n                statusMessages: 'cart/status-messages',\n                additionalCheckoutButtons: 'cart/additional-checkout-buttons',\n            },\n        };\n\n        this.$overlay.show();\n\n        // Remove last item from cart? Reload\n        if (remove && $cartItemsRows.length === 1) {\n            return window.location.reload();\n        }\n\n        utils.api.cart.getContent(options, (err, response) => {\n            this.$cartContent.html(response.content);\n            this.$cartTotals.html(response.totals);\n            this.$cartMessages.html(response.statusMessages);\n            this.$cartAdditionalCheckoutBtns.html(response.additionalCheckoutButtons);\n\n            $cartPageTitle.replaceWith(response.pageTitle);\n\n            const quantity = $('[data-cart-quantity]', this.$cartContent).data('cartQuantity') || 0;\n\n            if (!quantity) {\n                return window.location.reload();\n            }\n\n            this.bindEvents();\n            this.$overlay.hide();\n\n            $('body').trigger('cart-quantity-update', quantity);\n\n            $(`[data-cart-itemid='${this.$activeCartItemId}']`, this.$cartContent)\n                .filter(`[data-action='${this.$activeCartItemBtnAction}']`)\n                .trigger('focus');\n        });\n\n        haloCalculateFreeShipping(this.context);\n    }\n\n    bindCartEvents() {\n        const debounceTimeout = 400;\n        const cartUpdate = bind(debounce(this.cartUpdate, debounceTimeout), this);\n        const cartUpdateQtyTextChange = bind(debounce(this.cartUpdateQtyTextChange, debounceTimeout), this);\n        const cartRemoveItem = bind(debounce(this.cartRemoveItem, debounceTimeout), this);\n        let preVal;\n\n        // cart update\n        $('[data-cart-update]', this.$cartContent).on('click', event => {\n            const $target = $(event.currentTarget);\n\n            event.preventDefault();\n\n            // update cart quantity\n            cartUpdate($target);\n        });\n\n        // cart qty manually updates\n        $('.cart-item-qty-input', this.$cartContent).on('focus', function onQtyFocus() {\n            preVal = this.value;\n        }).change(event => {\n            const $target = $(event.currentTarget);\n            event.preventDefault();\n\n            // update cart quantity\n            cartUpdateQtyTextChange($target, preVal);\n        });\n\n        $('.cart-remove', this.$cartContent).on('click', event => {\n            const itemId = $(event.currentTarget).data('cartItemid');\n            const string = $(event.currentTarget).data('confirmDelete');\n            showAlertModal(string, {\n                icon: 'warning',\n                showCancelButton: true,\n                onConfirm: () => {\n                    // remove item from cart\n                    cartRemoveItem(itemId);\n                },\n            });\n            event.preventDefault();\n        });\n    }\n\n    bindPromoCodeEvents() {\n        const $couponContainer = $('.coupon-code');\n        const $couponForm = $('.coupon-form');\n        const $codeInput = $('[name=\"couponcode\"]', $couponForm);\n\n        $('.coupon-code-add').on('click', event => {\n            event.preventDefault();\n\n            $(event.currentTarget).hide();\n            $couponContainer.show();\n            $couponContainer.attr('aria-hidden', false);\n            $('.coupon-code-cancel').show();\n            $codeInput.trigger('focus');\n        });\n\n        $('.coupon-code-cancel').on('click', event => {\n            event.preventDefault();\n\n            $couponContainer.hide();\n            $couponContainer.attr('aria-hidden', true);\n            $('.coupon-code-cancel').hide();\n            $('.coupon-code-add').show();\n        });\n\n        $couponForm.on('submit', event => {\n            const code = $codeInput.val();\n\n            event.preventDefault();\n\n            // Empty code\n            if (!code) {\n                return showAlertModal($codeInput.data('error'));\n            }\n\n            utils.api.cart.applyCode(code, (err, response) => {\n                if (response.data.status === 'success') {\n                    this.refreshContent();\n                } else {\n                    showAlertModal(response.data.errors.join('\\n'));\n                }\n            });\n        });\n    }\n\n    bindGiftCertificateEvents() {\n        const $certContainer = $('.gift-certificate-code');\n        const $certForm = $('.cart-gift-certificate-form');\n        const $certInput = $('[name=\"certcode\"]', $certForm);\n\n        $('.gift-certificate-add').on('click', event => {\n            event.preventDefault();\n            $(event.currentTarget).toggle();\n            $certContainer.toggle();\n            $certContainer.attr('aria-hidden', false);\n            $('.gift-certificate-cancel').toggle();\n        });\n\n        $('.gift-certificate-cancel').on('click', event => {\n            event.preventDefault();\n            $certContainer.toggle();\n            $certContainer.attr('aria-hidden', true);\n            $('.gift-certificate-add').toggle();\n            $('.gift-certificate-cancel').toggle();\n        });\n\n        $certForm.on('submit', event => {\n            const code = $certInput.val();\n\n            event.preventDefault();\n\n            if (!checkIsGiftCertValid(code)) {\n                const validationDictionary = createTranslationDictionary(this.context);\n                return showAlertModal(validationDictionary.invalid_gift_certificate);\n            }\n\n            utils.api.cart.applyGiftCertificate(code, (err, resp) => {\n                if (resp.data.status === 'success') {\n                    this.refreshContent();\n                } else {\n                    showAlertModal(resp.data.errors.join('\\n'));\n                }\n            });\n        });\n    }\n\n    bindGiftWrappingEvents() {\n        const modal = defaultModal();\n\n        $('[data-item-giftwrap]').on('click', event => {\n            const itemId = $(event.currentTarget).data('itemGiftwrap');\n            const options = {\n                template: 'cart/modals/gift-wrapping-form',\n            };\n\n            event.preventDefault();\n\n            modal.open();\n\n            utils.api.cart.getItemGiftWrappingOptions(itemId, options, (err, response) => {\n                modal.updateContent(response.content);\n\n                this.bindGiftWrappingForm();\n            });\n        });\n    }\n\n    bindGiftWrappingForm() {\n        $('.giftWrapping-select').on('change', event => {\n            const $select = $(event.currentTarget);\n            const id = $select.val();\n            const index = $select.data('index');\n\n            if (!id) {\n                return;\n            }\n\n            const allowMessage = $select.find(`option[value=${id}]`).data('allowMessage');\n\n            $(`.giftWrapping-image-${index}`).hide();\n            $(`#giftWrapping-image-${index}-${id}`).show();\n\n            if (allowMessage) {\n                $(`#giftWrapping-message-${index}`).show();\n            } else {\n                $(`#giftWrapping-message-${index}`).hide();\n            }\n        });\n\n        $('.giftWrapping-select').trigger('change');\n\n        function toggleViews() {\n            const value = $('input:radio[name =\"giftwraptype\"]:checked').val();\n            const $singleForm = $('.giftWrapping-single');\n            const $multiForm = $('.giftWrapping-multiple');\n\n            if (value === 'same') {\n                $singleForm.show();\n                $multiForm.hide();\n            } else {\n                $singleForm.hide();\n                $multiForm.show();\n            }\n        }\n\n        $('[name=\"giftwraptype\"]').on('click', toggleViews);\n\n        toggleViews();\n    }\n\n    bindEvents() {\n        this.bindCartEvents();\n        this.bindPromoCodeEvents();\n        this.bindGiftWrappingEvents();\n        this.bindGiftCertificateEvents();\n\n        // initiate shipping estimator module\n        const shippingErrorMessages = {\n            country: this.context.shippingCountryErrorMessage,\n            province: this.context.shippingProvinceErrorMessage,\n        };\n        this.shippingEstimator = new ShippingEstimator($('[data-shipping-estimator]'), shippingErrorMessages);\n    }\n}\n","var apply = require('./_apply'),\n    createCtor = require('./_createCtor'),\n    root = require('./_root');\n\n/** Used to compose bitmasks for function metadata. */\nvar WRAP_BIND_FLAG = 1;\n\n/**\n * Creates a function that wraps `func` to invoke it with the `this` binding\n * of `thisArg` and `partials` prepended to the arguments it receives.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {number} bitmask The bitmask flags. See `createWrap` for more details.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} partials The arguments to prepend to those provided to\n *  the new function.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createPartial(func, bitmask, thisArg, partials) {\n  var isBind = bitmask & WRAP_BIND_FLAG,\n      Ctor = createCtor(func);\n\n  function wrapper() {\n    var argsIndex = -1,\n        argsLength = arguments.length,\n        leftIndex = -1,\n        leftLength = partials.length,\n        args = Array(leftLength + argsLength),\n        fn = (this && this !== root && this instanceof wrapper) ? Ctor : func;\n\n    while (++leftIndex < leftLength) {\n      args[leftIndex] = partials[leftIndex];\n    }\n    while (argsLength--) {\n      args[leftIndex++] = arguments[++argsIndex];\n    }\n    return apply(fn, isBind ? thisArg : this, args);\n  }\n  return wrapper;\n}\n\nmodule.exports = createPartial;\n","var baseCreate = require('./_baseCreate'),\n    isObject = require('./isObject');\n\n/**\n * Creates a function that produces an instance of `Ctor` regardless of\n * whether it was invoked as part of a `new` expression or by `call` or `apply`.\n *\n * @private\n * @param {Function} Ctor The constructor to wrap.\n * @returns {Function} Returns the new wrapped function.\n */\nfunction createCtor(Ctor) {\n  return function() {\n    // Use a `switch` statement to work with class constructors. See\n    // http://ecma-international.org/ecma-262/7.0/#sec-ecmascript-function-objects-call-thisargument-argumentslist\n    // for more details.\n    var args = arguments;\n    switch (args.length) {\n      case 0: return new Ctor;\n      case 1: return new Ctor(args[0]);\n      case 2: return new Ctor(args[0], args[1]);\n      case 3: return new Ctor(args[0], args[1], args[2]);\n      case 4: return new Ctor(args[0], args[1], args[2], args[3]);\n      case 5: return new Ctor(args[0], args[1], args[2], args[3], args[4]);\n      case 6: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5]);\n      case 7: return new Ctor(args[0], args[1], args[2], args[3], args[4], args[5], args[6]);\n    }\n    var thisBinding = baseCreate(Ctor.prototype),\n        result = Ctor.apply(thisBinding, args);\n\n    // Mimic the constructor's `return` behavior.\n    // See https://es5.github.io/#x13.2.2 for more details.\n    return isObject(result) ? result : thisBinding;\n  };\n}\n\nmodule.exports = createCtor;\n"],"names":["module","exports","baseRest","createWrap","getHolder","replaceHolders","bind","func","thisArg","partials","bitmask","length","holders","placeholder","Cart","_PageManager","apply","arguments","_proto","prototype","onReady","this","$modal","$cartPageContent","$","$cartContent","$cartMessages","$cartTotals","$cartAdditionalCheckoutBtns","$overlay","hide","$activeCartItemId","$activeCartItemBtnAction","setApplePaySupport","bindEvents","haloCalculateFreeShipping","context","themeSettings","halo_QuickEditCart","haloQuickEditCart","hasClass","on","event","preventDefault","cartPosition","document","querySelector","getBoundingClientRect","top","window","pageYOffset","scrollTo","behavior","ApplePaySession","addClass","cartUpdate","$target","_this","itemId","data","$el","oldQty","parseInt","val","maxQty","minQty","minError","maxError","newQty","showAlertModal","show","utils","cart","itemUpdate","err","response","status","remove","refreshContent","errors","join","cartUpdateQtyTextChange","preVal","_this2","invalidEntry","Number","isInteger","invalidEntryMessage","replace","cartRemoveItem","_this3","itemRemove","_this4","$cartItemsRows","$cartPageTitle","location","reload","getContent","template","content","totals","pageTitle","statusMessages","additionalCheckoutButtons","html","replaceWith","quantity","trigger","filter","bindCartEvents","_bind","_debounce","currentTarget","value","change","string","icon","showCancelButton","onConfirm","bindPromoCodeEvents","_this5","$couponContainer","$couponForm","$codeInput","attr","code","applyCode","bindGiftCertificateEvents","_this6","$certContainer","$certForm","$certInput","toggle","checkIsGiftCertValid","validationDictionary","createTranslationDictionary","invalid_gift_certificate","applyGiftCertificate","resp","bindGiftWrappingEvents","_this7","modal","defaultModal","open","getItemGiftWrappingOptions","updateContent","bindGiftWrappingForm","toggleViews","$singleForm","$multiForm","$select","id","index","allowMessage","find","shippingErrorMessages","country","shippingCountryErrorMessage","province","shippingProvinceErrorMessage","shippingEstimator","ShippingEstimator","PageManager","createCtor","root","isBind","Ctor","wrapper","argsIndex","argsLength","leftIndex","leftLength","args","Array","fn","baseCreate","isObject","thisBinding","result"],"sourceRoot":""}